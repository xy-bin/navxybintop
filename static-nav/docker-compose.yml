version: '3.8'

services:
  static-nav:
    # 使用当前目录下的Dockerfile构建镜像
    build: .
    
    # 容器名称
    container_name: static-nav
    
    # 端口映射：将容器内的3000端口映射到宿主机的3000端口
    ports:
      - "3000:3000"
    
    # 环境变量
    environment:
      - NODE_ENV=production
    
    # 卷挂载：将数据库文件和配置文件挂载到宿主机，以便数据持久化
    volumes:
      - ./data:/app/data
    
    # 重启策略：容器退出时自动重启
    restart: unless-stopped
    
    # 网络配置
    networks:
      - static-nav-network

# 定义网络
networks:
  static-nav-network:
    driver: bridge