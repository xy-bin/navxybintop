<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹è¯•å…¬å‘Šå†…å®¹è¾“å…¥</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
        }
        input, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        textarea {
            min-height: 200px;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <h1>æµ‹è¯•å…¬å‘Šå†…å®¹è¾“å…¥</h1>
    <div class="form-group">
        <label for="test-title">å…¬å‘Šæ ‡é¢˜</label>
        <input type="text" id="test-title" placeholder="è¯·è¾“å…¥å…¬å‘Šæ ‡é¢˜">
    </div>
    <div class="form-group">
        <label for="test-content">å…¬å‘Šå†…å®¹</label>
        <div id="test-content" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 min-h-[200px]"></div>
    </div>
    <button id="test-save">ä¿å­˜</button>
    <div id="test-result" style="margin-top: 20px;"></div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // æ¨¡æ‹ŸQuillåº“ä¸å¯ç”¨çš„æƒ…å†µ
        console.log('æµ‹è¯•é¡µé¢ï¼šQuillåº“æœªåŠ è½½');

        // é¡µé¢åŠ è½½å®Œæˆåç«‹å³æ£€æµ‹Quillæ˜¯å¦å¯ç”¨
        $(document).ready(function() {
            console.log('é¡µé¢åŠ è½½å®Œæˆï¼Œæ£€æµ‹Quillåº“æ˜¯å¦å¯ç”¨...');
            
            // æ£€æŸ¥Quillåº“æ˜¯å¦åŠ è½½
            if (typeof Quill === 'undefined') {
                console.log('âŒ Quillåº“æœªåŠ è½½');
                
                // é¢„å…ˆåˆ›å»ºé™çº§æ–¹æ¡ˆï¼šå°†divæ›¿æ¢ä¸ºtextarea
                const contentElement = document.getElementById('test-content');
                if (contentElement && contentElement.tagName === 'DIV') {
                    console.log('ğŸ”„ åˆ‡æ¢åˆ°å¤‡ç”¨æ–¹æ¡ˆï¼šæ™®é€šæ–‡æœ¬åŒºåŸŸ');
                    
                    // åˆ›å»ºæ–‡æœ¬åŒºåŸŸå…ƒç´ 
                    const textarea = document.createElement('textarea');
                    textarea.id = 'test-content';
                    textarea.className = 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 min-h-[200px]';
                    textarea.placeholder = 'è¯·è¾“å…¥å…¬å‘Šå†…å®¹...';
                    
                    // ä¿æŒåŸæœ‰å†…å®¹
                    textarea.value = contentElement.innerHTML;
                    
                    // æ›¿æ¢å…ƒç´ 
                    contentElement.parentNode.replaceChild(textarea, contentElement);
                    
                    console.log('âœ… é™çº§æ–¹æ¡ˆå·²å°±ç»ª');
                }
            }
        });

        // æ¨¡æ‹Ÿä¿å­˜åŠŸèƒ½
        $('#test-save').click(function() {
            const title = $('#test-title').val().trim();
            let content = '';
            
            // è·å–å†…å®¹
            const contentElement = $('#test-content');
            if (contentElement.is('textarea')) {
                content = contentElement.val().trim();
                // å°†çº¯æ–‡æœ¬è½¬æ¢ä¸ºHTMLæ ¼å¼
                content = content.replace(/\n/g, '<br>');
            } else {
                content = contentElement.html().trim();
            }
            
            // æ˜¾ç¤ºç»“æœ
            $('#test-result').html(`
                <h2>ä¿å­˜ç»“æœï¼š</h2>
                <p><strong>æ ‡é¢˜ï¼š</strong>${title}</p>
                <p><strong>å†…å®¹ï¼ˆHTMLæ ¼å¼ï¼‰ï¼š</strong><pre>${content}</pre></p>
            `);
        });
    </script>
</body>
</html>